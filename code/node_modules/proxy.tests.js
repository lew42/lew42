var test = require("test42");
var view = require("view42");
var assert = test.assert;
var util = require("util42");
var is = util.is;

var Base = require("base42/v1");

var observe = function(obj){
	return new Proxy(obj, {
		get(target, prop){
			const fn = target[prop];
			if (is.fn(fn)){
				return new Proxy(fn, {
					apply: function(target, it, args){
						console.group(prop, "called");
						target.apply(it, args);
						console.groupEnd();
					}
				})
			}
		}
	});
};

test("observe!", function(){
	var obj = {
		myMethod: function(){
			console.log("yo!");
		}
	};

	var something = {};
	obj.myMethod.something = something;

	var proxy = observe(obj);

	proxy.myMethod();

	assert(something == proxy.myMethod.something);
});