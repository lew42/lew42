var logger = require("log42");
var log = logger();
log.groupc("base42/v3/Base3.js");
log.close(function(){

// var Assign = require("assign42/v4");
// var assign_old = Method(Assign({
// 		prop: function(obj, name, value){
// 			if (is.fn(value) && !is.Class(value) && name.indexOf("config") !== 0){
// 				obj.log("." + name + " = <method>");
// 				Method(value).assignTo(obj, name);
// 			} else {
// 				Assign.prototype.prop.apply(this, arguments);
// 			}
// 		}
// 	}));

var assign = require("assign42/v3")();
var is = require("util42").is;
var Method = require("method42/v4");

assign.prop = function(obj, name, value){
	if (is.fn(obj["set_"+name]))
		obj["set_"+name](value);
	else if (is.fn(value) && !is.Class(value) && name.indexOf("config") !== 0){
		obj.log("." + name + " => <method>");
		Method(value).assignTo(obj, name);
	} else if (value && is.fn(value.assignTo)){
		value.assignTo(obj, name);
	} else {
		obj[name] = value;
	}
};

var Base2 = require("../v2");

var Base = Base2.extend({
	name: "Base3"
});

Base.Method = Method;
// console.log(Base.prototype.instantiate);

Method(assign).assignTo(Base.prototype, "assign");
Method(Base.prototype.instantiate).assignTo(Base.prototype, "instantiate");

// console.log(Base.prototype.instantiate);
module.exports = Base;

});