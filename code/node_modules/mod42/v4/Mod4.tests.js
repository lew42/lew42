var test = require("test42");
var view = require("view42");
var assert = test.assert;
var util = require("util42");
var is = util.is;

var Mod = require("./Mod4");

test("basic", function(){
	var mod = Mod();
	assert(mod instanceof Mod);
	assert(mod.constructor === Mod);
});

test("sub", function(){
	var mod = Mod();
	var mod2 = Mod.sub();
	mod.set({
		sub: mod2
	});

	assert(mod.sub.parent === mod);
});

test("sub2", function(){
	var Greeter = Mod.extend({
		name: "Greeter",
		adopt: true,
		greet: function(){
			console.log("Hello, my name is " + this.name);
		}
	});
	var mod = Mod({
		sub1: Greeter(),
		sub2: Greeter()
	});

	mod.sub1.greet();
	mod.sub2.greet();

	var greeter3 = Greeter();
	greeter3.greet();

	var mod2 = Mod({
		sub3: greeter3,
		sub4: mod.sub1
	});

	mod2.sub3.greet();
	mod2.sub4.greet();
});

test("extending", function(){
	var Mod2 = Mod.extend({
		name: "Mod2",
		sub: Mod.sub()
	});

	assert(Mod2.prototype.sub.parent === Mod2.prototype);

	// console.log("Mod.id", Mod.id);
	// console.log("Mod.prototype.id", Mod.prototype.id);
	// console.log("Mod2.id", Mod2.id);
	// console.log("Mod2.prototype.id", Mod2.prototype.id);
	// console.log("Mod2.prototype.sub.id", Mod2.prototype.sub.id);
	// console.log("Mod2.prototype.sub.parent.id", Mod2.prototype.sub.parent.id);
	// console.log("++++");

	var mod = Mod2();
	// console.log("mod.id", mod.id);
	// console.log("mod.sub.id", mod.sub.id);
	// console.log("mod.sub.parent.id", mod.sub.parent.id);
	assert(mod.sub.parent === mod);
	assert(Mod2.prototype.sub.parent === Mod2.prototype);
});