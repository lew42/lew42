var track = require("track42");
/*
deps:
	define mixin (defines a property on another object)
	.name: name of property, as defined using define
	.export: name of property to export
*/
module.exports = {
	getter: function(ctx){
		if (!ctx.hasOwnProperty(this.name)){
			if (!ctx.assign.mfn){
				console.error("cloner must be used with assign.mfn");
				return false;
			}
			ctx.assign(this.name, this.clone());
			return ctx[this.name];
		} else {
			return this[this.export];
		}
	},
	clone: function(){
		var clone = Object.create(this);
		track(clone);
		clone.instantiate.apply(clone, arguments);
		return clone;
	}
};