var log = require("log42")(true);
log.group("assign42/v4/Assign4.js");
log.close(function(){

var Mfn = require("mfn42/v3");
var is = require("util42").is;

var Assign = module.exports = Mfn.extend({
	name: "Assign4",
	main: function(obj, name, value){
		if (is.str(name)){
			this.prop(obj, name, value);
		} else {
			for (var i = 1; i < arguments.length; i++){
				this.arg(obj, arguments[i]);
			}
		}
		return obj;
	},
	prop: function(obj, name, value){
		obj.log("."+name, "=", value);
		obj[name] = value;
	},
	arg: function(obj, arg){
		var value;
		for (var name in arg){
			value = arg[name];
			if (is.fn(obj["set_"+name])){
				// obj.log(".set_"+name+"(value);");
				obj["set_"+name](value);
			} else if (value && is.fn(value.assignTo)){
				obj.log("."+name, "<--", value, ".assignTo()");
				value.assignTo(obj, name);
			} else {
				this.prop(obj, name, value);
			}
		}
	}
});


}); // log.close