var test = require("test42");
var view = require("view42");
var assert = test.assert;
var util = require("util42");
var is = util.is;

test("proxy getter", function(){
	var obj = {
		method: function(){
			console.group("method()");
			console.log("is proxy?", this === proxy);
			console.log("is obj?", this === obj);
			console.groupEnd();
		}
	};

	var proxy = new Proxy(obj, {
		get: function(target, prop, rec){
			console.group("get");
			if (target === proxy) console.info("target is proxy!");
			if (target === obj) console.log("target is obj");
			if (target === obj2) console.log("target is obj2");
			if (rec === proxy) console.log("rec is proxy");
			if (rec === obj) console.log("rec is obj");
			if (rec === obj2) console.log("rec is obj2");

			var value = target[prop];
			console.log("value:", value);
			console.groupEnd();
			return value;
		}
	});

	console.group("obj.prop");
	console.log("obj.prop", obj.prop);
	console.groupEnd();

	console.group("proxy.prop");
	console.log("proxy.prop", proxy.prop);
	console.groupEnd();

	var obj2 = Object.create(proxy);

	console.group("obj2.prop");
	console.log("obj2.prop", obj2.prop);
	console.groupEnd();
	// console.group("obj.method()");
	// obj.method();
	// console.groupEnd();

	// console.group("proxy.method()");
	// proxy.method();
	// console.groupEnd();

	proxy.prop = 123;

	console.group("proxy.prop");
	console.log("proxy.prop", proxy.prop);
	console.groupEnd();

	console.group("obj2.prop");
	console.log("obj2.prop", obj2.prop);
	console.groupEnd();
});

// test("proxy stuff", function(){
// 	var obj = {id: 1};

// 	var proxy = new Proxy(obj, {
// 		set: function(target, prop, value, rec){
// 			console.group("setter");
// 			if (typeof obj2 !== "undefined"){
// 				if (target === obj2)
// 					console.log("target is obj2");
// 			}

// 			if (target === proxy) console.info("target is proxy?");
// 			if (target === obj) console.log("target is obj");


// 			console.log("target", target, target.id);
// 			console.log("prop", prop);
// 			console.log("value", value);
// 			console.log("rec", rec, rec.id);

// 			if (typeof obj2 !== "undefined"){
// 				if (rec === obj2)
// 					console.log("rec is obj2");
// 			}

// 			if (rec === proxy) console.log("rec is proxy");
// 			if (rec === obj) console.info("rec is obj?");

// 				target[prop] = value;
// 			console.groupEnd();
// 			return true;
// 		}
// 	});

// 	console.group("proxy.whatever = 123;");
// 	proxy.whatever = 123;
// 	console.groupEnd();

// 	console.group("proxy.id = 2;");
// 	proxy.id = 2;
// 	console.groupEnd();

// 	console.log("obj", obj);

// 	console.group("create obj2");
// 	var obj2 = Object.create(proxy);
// 	console.groupEnd();

// 	console.group("obj2.something = 478");
// 	obj2.something = 478;
// 	console.groupEnd();

// 	console.group("obj2.id = 99");
// 	obj2.id = 99;
// 	console.groupEnd();

// 	console.log("obj", obj);
// });