var is = require("util42").is;

var assignProp = function(obj, name, value){
	if (is.fn(obj["set_"+name]))
		obj["set_"+name](value);
	else
		obj[name] = value;

	if (value && is.fn(value.assignedTo))
		value.assignedTo(obj, name);
};

var assign = module.exports = function(name, value){
	if (is.str(name)){
		assignProp(this, name, value);
	} else {
		for (var i = 0; i < arguments.length; i++){
			var arg = arguments[i];
			for (var j in arg){
				assignProp(this, j, arg[j]);
			}
		}
	}
	return this;
};