var test = require("test42");
var view = require("view42");
var assert = test.assert;
var util = require("util42");
var is = util.is;

var Mod5 = require("./");
var Prop = Mod5.Prop;

test("basic", function(){
	var mod = Mod5();

	assert(mod.constructor === Mod5);
	assert(mod instanceof Mod5);
});

test("custom props", function(){
	var mod = Mod5({
		test: Prop({
			meta: "data",
			value: {}
		}),
		cbs: Prop([])
	})

	console.log("yo");
	assert(mod.prop("test").meta === "data");
	assert(is.arr(mod.cbs));
});

test("extend", function(){
	console.log("here");
	var Mod6 = Mod5.extend({
		name: "Mod6",
		View: {
			icon: "cubes"
		},
		cbs: Prop([]),
		a: "a",
		b: true,
		c: 3
	});

	var mod1 = Mod6();
	var mod2 = Mod6();

	assert(is.arr(mod1.cbs));
	assert(mod1.cbs !== Mod6.prototype.cbs);
	assert(mod1.cbs !== mod2.cbs);
});

test("created", function(){
	Mod5.created.add(function(mod){
		console.log(mod.id);
	});

	var mod = Mod5();
	console.log(mod.id);
});