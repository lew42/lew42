var test = require("test42");
var view = require("view42");
var assert = test.assert;
var util = require("util42");
var is = util.is;

var Q1 = require("./Q1");

test("basic", function(){
	var q = Q1();

	assert(q instanceof Q1);
	assert(q.values !== Q1.prototype.values);

	var check = {};
	q.append(function(){
		q.one = 1;
	});

	q.exec();

	assert(q.one === 1);
});

test("promise-like", function(){
	var a = Q1.Promise();
	var b = Q1.Promise();
	var c = Q1.Promise();

	a.then(function(){
		console.log("a");
	});

	b.then(function(){
		console.log("b");
	});

	c.then(function(){
		console.log("c");
	});

	var aAndB = a.and(b);

	aAndB.then(function(){
		console.log("a and b");
	});

	aAndB.and(c).then(function(){
		console.log("a, b, and c");
	});

	b.and(c).then(function(){
		console.log("b and c");
	});

	c.and(b).then(function(){
		console.log("c and b");
	});


	c.resolve();
	debugger;
	b.resolve();

	a.resolve();
});