var test = require("test42");
var view = require("view42");
var assert = test.assert;
var util = require("util42");
var is = util.is;

var Method = require("./Method3");
var method = Method.method;

var Mod = require("mod42/v2");

var assign = require("assign42/v1")().fn;

test("basic", function(){
	var method = Method();
	assert(method instanceof Method);
	assert(method.constructor === Method);
});

test("assign", function(){
	var obj = {
		assign: assign
	};

	obj.assign({
		myMethod: Method(function(){
			console.log("this is myMethod");
		})
	});

	obj.myMethod();
});

test("extend", function(){
	var ctx, Mod2 = Mod.extend({
		name: "Mod2",
		myMethod: Method(function(){
			console.log("this is myMethod", this, arguments);
			ctx = this;
		})
	});

	assert(Mod2.prototype.myMethod.method.mod === Mod2.prototype);

	var mod = Mod2();

	assert(mod.myMethod.method.mod === mod);
	assert(mod.myMethod.method !== Mod2.prototype.myMethod.method);

	mod.myMethod(1, true, "three");
	assert(ctx === mod);

	var mod2 = Mod2();

	mod2.myMethod("yo");
	assert(ctx === mod2);
});